{% extends 'main.html' %}

{% block content %}
    <div class="content">
        <div class="supercontent">
            <ul class="cpec_content">
                {% for subsection in subsections %}
                    <li class="cpec_item {% if forloop.first %}-current{% endif %}">
                        <a href="javascript:void(0);" onclick="showContent({{ subsection.id }}, this)">
                            {{ subsection.title }}
                        </a>
                    </li>
                {% endfor %}
            </ul>

            <div class="content-block">
                {% for subsection in subsections %}
                    <div id="content-{{ subsection.id }}" class="content-item" style="{% if forloop.first %}display: block;{% else %}display: none;{% endif %};">
                        {{ subsection.content|safe }}
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <script>
        function showContent(id, element) {
            // Скрываем все блоки с контентом
            document.querySelectorAll('.content-item').forEach(item => {
                item.style.display = 'none';
            });

            // Показываем выбранный блок
            const contentDiv = document.getElementById(`content-${id}`);
            if (contentDiv) {
                contentDiv.style.display = 'block';
            }

            // Убираем класс -current у всех элементов
            document.querySelectorAll('.cpec_item').forEach(item => {
                item.classList.remove('-current');
            });

            // Добавляем класс -current к текущему элементу
            element.parentElement.classList.add('-current');
        }

        // Устанавливаем выбранный элемент по умолчанию при загрузке
        document.addEventListener('DOMContentLoaded', function() {
            const firstItem = document.querySelector('.cpec_item');
            if (firstItem) {
                showContent({{ subsections.0.id }}, firstItem.querySelector('a'));
            }
        });
    </script>
{% endblock %}


{##}
{#{% extends 'main.html' %}#}
{##}
{##}
{##}
{##}
{#{% block content %}#}
{##}
{#    <div class="content">#}
{#        <div class="supercontent">#}
{#            <ul class="cpec_content">#}
{##}
{#                <li class="cpec_item"><a href="#">Общий перечень</a></li>#}
{#                <li class="cpec_item"><a href="#">Федеральные законы</a></li>#}
{#                <li class="cpec_item"><a href="#">Постановления правительства РФ</a></li>#}
{#                <li class="cpec_item"><a href="#">Нормативные правовые акты федеральных органов исполнительной#}
{#                    власти</a></li>#}
{#                <li class="cpec_item"><a href="#">Другие документы</a></li>#}
{#            </ul>#}
{#            <div class="content-block">#}
{##}
{#            </div>#}
{#        </div>#}
{#    </div>#}
{#{% endblock %}#}

{##}
{#{% extends 'main.html' %}#}
{##}
{#{% block content %}#}
{#    <div class="content">#}
{#        <div class="supercontent">#}
{#            <!-- Список подразделов -->#}
{#            <ul class="cpec_content">#}
{#                {% for subsection in section.subsections.all %}#}
{#                    <li class="cpec_item">#}
{#                        <a href="#" data-id="{{ subsection.id }}" class="subsection-link">{{ subsection.title }}</a>#}
{#                    </li>#}
{#                {% empty %}#}
{#                    <li>Нет доступных подразделов</li>#}
{#                {% endfor %}#}
{#            </ul>#}
{##}
{#            <!-- Содержимое текущего подраздела -->#}
{#            <div class="content-block" id="subsection-content">#}
{#                <p>Выберите подраздел для отображения его содержимого.</p>#}
{#            </div>#}
{#        </div>#}
{#    </div>#}
{##}
{#    <script>#}
{#        document.addEventListener('DOMContentLoaded', function () {#}
{#            const links = document.querySelectorAll('.subsection-link');#}
{#            const contentDiv = document.getElementById('subsection-content');#}
{##}
{#            links.forEach(link => {#}
{#                link.addEventListener('click', function (e) {#}
{#                    e.preventDefault();#}
{#                    const subsectionId = this.getAttribute('data-id');#}
{##}
{#                    // AJAX-запрос для получения содержимого подраздела#}
{#                    fetch(`/get_subsection_content/${subsectionId}/`)#}
{#                        .then(response => response.json())#}
{#                        .then(data => {#}
{#                            contentDiv.innerHTML = `<h2>${data.title}</h2><div>${data.content}</div>`;#}
{#                        })#}
{#                        .catch(error => console.error('Ошибка загрузки:', error));#}
{#                });#}
{#            });#}
{#        });#}
{#    </script>#}
{#{% endblock %}#}